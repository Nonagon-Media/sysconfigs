#!/bin/bash
# claude-trail - Log commands with rationale and output for audit trail
#
# Usage: claude-trail "rationale" "command"
# Example: claude-trail "Check disk space on k8slab" "ssh k8slab df -h"
#
# Output format:
#   RATIONALE: <why this command is being run>
#   COMMAND: <the command>
#   OUTPUT:
#   <command output>
#   ---

set -e

if [ $# -lt 2 ]; then
    echo "Usage: claude-trail \"rationale\" \"command\""
    echo "Example: claude-trail \"Check pod status\" \"kubectl get pods -n logging-system\""
    exit 1
fi

RATIONALE="$1"
COMMAND="$2"

echo "RATIONALE: $RATIONALE"
echo "COMMAND: $COMMAND"
echo "OUTPUT:"
eval "$COMMAND"
echo "---"
